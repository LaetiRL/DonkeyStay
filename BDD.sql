-- MySQL Script generated by MySQL Workbench
-- Fri Mar 18 09:09:29 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema DonkeyStay
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DonkeyStay
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DonkeyStay` DEFAULT CHARACTER SET utf8 ;
USE `DonkeyStay` ;

-- -----------------------------------------------------
-- Table `DonkeyStay`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `firstname` VARCHAR(45) NULL,
  `lastname` VARCHAR(45) NULL,
  `password` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `role` ENUM('user', 'admin') NULL,
  `phone` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`roomtype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`roomtype` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `rname` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`hometype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`hometype` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `hname` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`capacity`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`capacity` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nb_traveler` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`room` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `roomtype_id` INT NOT NULL,
  `hometype_id` INT NOT NULL,
  `title` VARCHAR(80) NOT NULL,
  `description` MEDIUMTEXT NULL,
  `nb_bedroom` INT NOT NULL,
  `nb_bathroom` INT NOT NULL,
  `price` DECIMAL(6,2) NOT NULL,
  `adress` VARCHAR(200) NOT NULL,
  `city` VARCHAR(45) NOT NULL,
  `has_tv` TINYINT(1) NOT NULL,
  `has_wifi` TINYINT(1) NOT NULL,
  `has_kitchen` TINYINT(1) NOT NULL,
  `has_aircon` TINYINT(1) NOT NULL,
  `start_dispo` DATE NOT NULL,
  `end_dispo` DATE NOT NULL,
  `user_id` INT NOT NULL,
  `capacity_id` INT NOT NULL,
  PRIMARY KEY (`id`, `roomtype_id`, `hometype_id`, `user_id`, `capacity_id`),
  CONSTRAINT `fk_Rooms_Roomtypes1`
    FOREIGN KEY (`roomtype_id`)
    REFERENCES `DonkeyStay`.`roomtype` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Rooms_Hometypes1`
    FOREIGN KEY (`hometype_id`)
    REFERENCES `DonkeyStay`.`hometype` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_room_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `DonkeyStay`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_room_capacity1`
    FOREIGN KEY (`capacity_id`)
    REFERENCES `DonkeyStay`.`capacity` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Rooms_Roomtypes1_idx` ON `DonkeyStay`.`room` (`roomtype_id` ASC) VISIBLE;

CREATE INDEX `fk_Rooms_Hometypes1_idx` ON `DonkeyStay`.`room` (`hometype_id` ASC) VISIBLE;

CREATE INDEX `fk_room_user1_idx` ON `DonkeyStay`.`room` (`user_id` ASC) VISIBLE;

CREATE INDEX `fk_room_capacity1_idx` ON `DonkeyStay`.`room` (`capacity_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`booking`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`booking` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `room_id` INT NOT NULL,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL,
  `nb_person` INT NOT NULL,
  `total_price` DECIMAL(6,2) NOT NULL,
  `booking_date` DATETIME NOT NULL,
  `create_date` DATETIME NOT NULL,
  `update_date` DATETIME NOT NULL,
  `pet_option` INT NOT NULL,
  `cancel_option` INT NOT NULL,
  PRIMARY KEY (`id`, `user_id`, `room_id`),
  CONSTRAINT `fk_Bookings_Users1`
    FOREIGN KEY (`user_id`)
    REFERENCES `DonkeyStay`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Bookings_Rooms1`
    FOREIGN KEY (`room_id`)
    REFERENCES `DonkeyStay`.`room` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Bookings_Users1_idx` ON `DonkeyStay`.`booking` (`user_id` ASC) VISIBLE;

CREATE INDEX `fk_Bookings_Rooms1_idx` ON `DonkeyStay`.`booking` (`room_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `DonkeyStay`.`image`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DonkeyStay`.`image` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `img` VARCHAR(200) NOT NULL,
  `room_id` INT NOT NULL,
  PRIMARY KEY (`id`, `room_id`),
  CONSTRAINT `fk_Images_Rooms1`
    FOREIGN KEY (`room_id`)
    REFERENCES `DonkeyStay`.`room` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Images_Rooms1_idx` ON `DonkeyStay`.`image` (`room_id` ASC) VISIBLE;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`user` (`id`, `firstname`, `lastname`, `password`, `email`, `role`, `phone`) VALUES (1, 'Bruce', 'Wayne', 'bat', 'darknight@batman.com', 'user', '0609090909');
INSERT INTO `DonkeyStay`.`user` (`id`, `firstname`, `lastname`, `password`, `email`, `role`, `phone`) VALUES (2, 'Selina', 'Kyle', 'cat', 'catlover@catwoman.com', 'user', '0608080808');
INSERT INTO `DonkeyStay`.`user` (`id`, `firstname`, `lastname`, `password`, `email`, `role`, `phone`) VALUES (3, 'Alfred', 'Pennyworth', 'butler', 'butler@batman.com', 'user', '06010101010');
INSERT INTO `DonkeyStay`.`user` (`id`, `firstname`, `lastname`, `password`, `email`, `role`, `phone`) VALUES (4, 'Oswald', 'Cobblepot', 'penguin', 'penguin@batman.com', 'user', '0602020202');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`roomtype`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`roomtype` (`id`, `rname`) VALUES (1, 'Logement entier');
INSERT INTO `DonkeyStay`.`roomtype` (`id`, `rname`) VALUES (2, 'Chambre privée');
INSERT INTO `DonkeyStay`.`roomtype` (`id`, `rname`) VALUES (3, 'Chambre partagée');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`hometype`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`hometype` (`id`, `hname`) VALUES (1, 'Appartement');
INSERT INTO `DonkeyStay`.`hometype` (`id`, `hname`) VALUES (2, 'Maison');
INSERT INTO `DonkeyStay`.`hometype` (`id`, `hname`) VALUES (3, 'Atypique');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`capacity`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (1, '1 Voyageur');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (2, '2 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (3, '3 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (4, '4 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (5, '5 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (6, '6 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (7, '7  Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (8, '8  Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (9, '9 Voyageurs');
INSERT INTO `DonkeyStay`.`capacity` (`id`, `nb_traveler`) VALUES (10, '10  Voyageurs');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`room`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`room` (`id`, `roomtype_id`, `hometype_id`, `title`, `description`, `nb_bedroom`, `nb_bathroom`, `price`, `adress`, `city`, `has_tv`, `has_wifi`, `has_kitchen`, `has_aircon`, `start_dispo`, `end_dispo`, `user_id`, `capacity_id`) VALUES (1, 1, 1, 'Appartement de luxe avec balcon - Louvre', 'Vous vivez au coeur de Paris!\nSitué entre le musée du Louvre et Notre Dame de Paris, au troisième étage d\'un immeuble datant de 1860, l\'appartement vous surprendra, éclairé par la lumière du jour.\nLe salon est une pièce chaleureuse, soigneusement décorée dans l’esprit unique du style parisien. De l\'entrée de l\'appartement à la salle de bain, le mélange de matériaux précieux et de meubles confère une élégance harmonieuse.', 2, 2, 550, '91 rue de Rivoli 75001', 'Paris', 1, 1, 1, 0, '2022-03-07', '2022-04-07', 1, 7);
INSERT INTO `DonkeyStay`.`room` (`id`, `roomtype_id`, `hometype_id`, `title`, `description`, `nb_bedroom`, `nb_bathroom`, `price`, `adress`, `city`, `has_tv`, `has_wifi`, `has_kitchen`, `has_aircon`, `start_dispo`, `end_dispo`, `user_id`, `capacity_id`) VALUES (2, 3, 2, 'Loft de caractère sur le port.', 'Idéalement situé entre le Port (50m) et le cours Estienne d\'Orves (50m), ce loft en duplex de 82 m² est issu de la réhabilitation du troisième et dernier étage d\'une ancienne savonnerie. La patine centenaire du sol en terre cuite, le salon cathédral et les poutres d\'anciens mâts de galères transmettent à ce lieu entièrement rénové, un caractère unique d\'authenticité. Les différents espaces mansardés, entièrement ouverts, créent une ambiance chaleureuse, épurée et contemporaine.', 2, 2, 150, '39 rue de la loge 13002', 'Nice', 0, 1, 1, 1, '2022-03-14', '2022-03-31', 2, 6);
INSERT INTO `DonkeyStay`.`room` (`id`, `roomtype_id`, `hometype_id`, `title`, `description`, `nb_bedroom`, `nb_bathroom`, `price`, `adress`, `city`, `has_tv`, `has_wifi`, `has_kitchen`, `has_aircon`, `start_dispo`, `end_dispo`, `user_id`, `capacity_id`) VALUES (3, 1, 2, 'Logement entier cosy et jardin accès facile stade', 'Bonjour !\nNous serions ravis ( Laureen & Valentin) de vous accueillir dans notre maison que nous vous laissons le temps de votre séjour. Proche des transports pour le groupama stadium, accès facile à Lyon ( centre en 35 min en transport) et proches des commerces. La chambre n\'est pas très grande mais cosy, avec un grand lit double de 180x200 parfait pour une bonne nuit !\nCuisine équipée ( avec du bon café ! ) et salon disposant d\'une grande TV et de Netflix.', 1, 1, 70, '1 rue du Pond Neuf 59800', 'Lille', 1, 1, 1, 0, '2022-03-07', '2023-03-07', 3, 2);
INSERT INTO `DonkeyStay`.`room` (`id`, `roomtype_id`, `hometype_id`, `title`, `description`, `nb_bedroom`, `nb_bathroom`, `price`, `adress`, `city`, `has_tv`, `has_wifi`, `has_kitchen`, `has_aircon`, `start_dispo`, `end_dispo`, `user_id`, `capacity_id`) VALUES (4, 2, 3, 'Loft dans un ancien Chai au coeur de Bordeaux', 'Superbe loft atypique de 180m2 dans un ancien Chai au coeur de Bordeaux.\n\nÀ seulement quelques pas du pont de pierre, dans l\'hyper centre, vous trouverez cet immeuble typiquement bordelais datant du 18ème siècle. Ce loft saura vous séduire autant par son charme authentique que par ses volumes.\n\nConvivial et chaleureux, il allie le confort du moderne et le charme de l\'ancien.', 3, 2, 185, '27 rue Francis Martin 33000', 'Bordeaux', 1, 1, 1, 1, '2022-03-20', '2022-05-20', 4, 6);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DonkeyStay`.`image`
-- -----------------------------------------------------
START TRANSACTION;
USE `DonkeyStay`;
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (1, '/img/logements/bruce_1.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (2, '/img/logements/bruce_2.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (3, '/img/logements/bruce_3.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (4, '/img/logements/bruce_4.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (5, '/img/logements/bruce_5.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (6, '/img/logements/bruce_6.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (7, '/img/logements/bruce_7.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (8, '/img/logements/bruce_8.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (9, '/img/logements/bruce_9.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (10, '/img/logements/bruce_10.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (11, '/img/logements/bruce_11.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (12, '/img/logements/bruce_12.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (13, '/img/logements/bruce_13.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (14, '/img/logements/bruce_14.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (15, '/img/logements/bruce_15.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (16, '/img/logements/bruce_16.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (17, '/img/logements/bruce_17.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (18, '/img/logements/bruce_18.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (19, '/img/logements/bruce_19.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (20, '/img/logements/bruce_20.jpeg', 1);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (21, '/img/logements/selina_1.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (22, '/img/logements/selina_2.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (23, '/img/logements/selina_3.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (24, '/img/logements/selina_4.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (25, '/img/logements/selina_5.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (26, '/img/logements/selina_6.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (27, '/img/logements/selina_7.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (28, '/img/logements/selina_8.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (29, '/img/logements/selina_9.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (30, '/img/logements/selina_10.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (31, '/img/logements/selina_11.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (32, '/img/logements/selina_12.jpeg', 2);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (33, '/img/logements/oswald_1.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (34, '/img/logements/oswald_2.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (35, '/img/logements/oswald_3.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (36, '/img/logements/oswald_4.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (37, '/img/logements/oswald_5.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (38, '/img/logements/oswald_6.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (39, '/img/logements/oswald_7.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (40, '/img/logements/oswald_8.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (41, '/img/logements/oswald_9.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (42, '/img/logements/oswald_10.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (43, '/img/logements/oswald_11.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (44, '/img/logements/oswald_12.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (45, '/img/logements/oswald_13.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (46, '/img/logements/oswald_14.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (47, '/img/logements/oswald_15.jpeg', 4);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (48, '/img/logements/alfred_1.jpeg', 3);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (49, '/img/logements/alfred_2.jpeg', 3);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (50, '/img/logements/alfred_3.jpeg', 3);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (51, '/img/logements/alfred_4.jpeg', 3);
INSERT INTO `DonkeyStay`.`image` (`id`, `img`, `room_id`) VALUES (52, '/img/logements/alfred_5.jpeg', 3);

COMMIT;

